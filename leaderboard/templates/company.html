{% extends "base.html" %}
{% load i18n %}
{% load staticfiles %}

{% block title %}{{company.name}} Statistics{% endblock %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/cssplot.full.css' %}">
{% endblock %}

{% block body %}

{% load absolutely %}
{% load humanize %}

<div class="row clearfix">
    <div class="col-sm-12 column">
        <center>
          <h1>Walk/Ride Day 2015 <br><strong>{{company.name}}</strong></h1>
          {% if company.nr_members %}
          <p>{{company.nr_members | intcomma}} team members eligible to participate</p>
          {% elif company.nr_employees %}
          <p>{{company.nr_employees | intcomma}} employees eligible to participate</p>
          {% endif %}
        </center>
    </div>
</div>

<div class="row" style="padding: 15px 0px;">
<div class="col-sm-4 column overall">
  <h2>Overall</h2>
  {% for fact in overall %}
    <div class="panel">
    {% if fact.1 < 1 %}
      <p>{{fact.1 | absolutely | floatformat:1 | intcomma}}</p>
      <h4>{{fact.0}}</h4>
    {% else %}
      <p>{{fact.1 | intcomma}}</p>
      <h4>{{fact.0}}</h4>
    {% endif %}
    </div>
  {% endfor %}

</div>
<div class="col-sm-8 column">
  <h2>By the month</h2>
  <div>

    <!-- tabs -->
    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="#impacts" aria-controls="impacts" role="tab" data-toggle="pill">Impacts</a></li>
      <li role="presentation"><a href="#commutes" aria-controls="commutes" role="tab" data-toggle="pill">Commutes</a></li>
      <li role="presentation"><a href="#participation" aria-controls="participation" role="tab" data-toggle="pill">Participation</a></li>
    </ul>

    <!-- data -->
    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="impacts">
        <h2>{{ impacts.0 }}</h2>
        <p>{{ impacts.1 }}</p>
        {% for datapoint in impacts.2 %}
          <h4>{{datapoint.0}}</h4>
          <div class="bar-chart">
              <ul class="plot-container">
                {%  for month in datapoint.1 %}
                  <li style="width: {{ month.1 | absolutely | floatformat:0 | default:"0" }}px; background: orange !important;" data-cp-size="raw"><span class="plot-label">{{ month.0 }}<br>{{ month.1 | absolutely | floatformat:0 | default:"0" }}</span></li>
                {% endfor %}
              </ul>
          </div>
        {% endfor %}
      </div>
      <div role="tabpanel" class="tab-pane" id="commutes">
        <h2>{{ commutes.0 }}</h2>
        <p>{{ commutes.1 }}</p>
        {% for datapoint in commutes.2 %}
          <h4>{{datapoint.0}}</h4>
          <div class="bar-chart">
              <ul class="plot-container">
                {%  for month in datapoint.1 %}
                  <li data-cp-size="{{ month.1 | floatformat:0 | default:"0" }}"><span class="plot-label">{{ month.0 }}<br>{{ month.1 | default:"0" }}%</span></li>
                {% endfor %}
              </ul>
          </div>
        {% endfor %}
      </div>
      <div role="tabpanel" class="tab-pane" id="participation">
        <h2>{{ participation.0 }}</h2>
        <p>{{ participation.1 }}</p>

          <h4>{{participation.2.0.0}}</h4>
          <div class="bar-chart">
              <ul class="plot-container">
                {%  for month in participation.2.0.1 %}
                  <li style="width: {{ month.1 | floatformat:0 | default:"0" | default:"0" }}px; background: orange !important;" data-cp-size="raw"><span class="plot-label">{{ month.0 }}<br>{{ month.1 | default:"0" }}</span></li>
                {% endfor %}
              </ul>
          </div>

          <h4>{{participation.2.1.0}}</h4>
          <div class="bar-chart">
              <ul class="plot-container">
                {%  for month in participation.2.1.1 %}
                  <li data-cp-size="{{ month.1 | floatformat:0 | default:"0" }}"><span class="plot-label">{{ month.0 }}<br>{{ month.1 | default:"0" }}%</span></li>
                {% endfor %}
              </ul>
          </div>

      </div>

    </div>

  </div>


</div>




</div>
{% endblock %}


